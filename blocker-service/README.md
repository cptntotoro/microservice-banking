# Сервис блокировки операций (Blocker Service)

Blocker Service — это реактивный микросервис, предназначенный для проверки финансовых операций на предмет мошеннической активности и принятия решений об их блокировке. Сервис анализирует операции в реальном времени и оценивает уровень риска на основе множества факторов.

## Основные возможности

- Проверка дублирующихся операций: Обнаружение и блокировка повторяющихся операций с одинаковым идентификатором
- Анализ аномальных сумм: Выявление операций с суммой, превышающей среднюю в 2 раза
- Обнаружение операций в нерабочее время: Блокировка операций, совершаемых с 23:00 до 6:00
- Контроль частоты операций: Ограничение количества операций (не более 5 за 10 минут)
- Учет истории блокировок: Повышение уровня риска для пользователей с историей заблокированных операций
- Комплексная оценка риска: Совокупный анализ всех факторов с порогом блокировки 150 баллов

## Критерии оценки риска

- Дублирующаяся операция: 100 баллов
- Аномальная сумма: 80 баллов
- Нерабочее время: 70 баллов
- Высокая частота: 90 баллов
- История блокировок: 50 баллов за каждую заблокированную операцию за последние 24 часа

## Поддерживаемые типы операций

- DEPOSIT (Пополнение счета)
- WITHDRAW (Снятие со счета)
- TRANSFER (Перевод между счетами)
- PAYMENT (Платеж)

## Сборка и запуск

1. Убедитесь, что у вас запущен Docker Desktop
2. Соберите сервис (компиляция + тесты)

`mvn clean install -pl blocker-service`

3. Запустите Consul:

`docker-compose -f docker-compose-consul.yml up -d consul-server`

4. Запустите сервис

`java -jar blocker-service/target/blocker-service.jar`