# Сервис генерации курсов валют (Exchange Generator)

Exchange Generator Service — это stateless реактивный микросервис, предназначенный для генерации курсов валют в реальном времени и отправки их в сервис Exchange через REST-запросы с использованием API Gateway.

## Основные возможности

- Базовая валюта RUB: Все курсы генерируются только относительно российской рубля (RUB) как базовой валюты.
- Конвертация через RUB: Все операции конвертации между валютами выполняются через RUB (например, USD → CNY конвертируется как USD → RUB → CNY).
- Базовые курсы: Используются предустановленные базовые курсы валют к RUB для расчета.
- Случайное отклонение: ±1% от базового курса для имитации рыночных колебаний.
- Спред: Разница 0.5% между ценой покупки (buy) и продажи (sell) для каждой валютной пары.
- Округление: Курсы округляются до 4 знаков после запятой с использованием режима HALF_UP.
- Частота: Генерация и отправка курсов каждую секунду (настраивается через exchange.rate.generation.interval.ms).

## Логика генерации курсов

- Базовая валюта RUB: Все курсы генерируются только относительно российской рубля (RUB) как базовой валюты.
- Конвертация через RUB: Все операции конвертации между валютами выполняются через RUB (например, USD → CNY конвертируется как USD → RUB → CNY).
- Базовые курсы: Используются предустановленные базовые курсы валют к RUB для расчета.
- Случайное отклонение: ±1% от базового курса для имитации рыночных колебаний.
- Спред: Разница 0.5% между ценой покупки (buy) и продажи (sell) для каждой валютной пары.
- Округление: Курсы округляются до 4 знаков после запятой с использованием режима HALF_UP.
- Частота: Генерация и отправка курсов каждую секунду (настраивается через exchange.rate.generation.interval.ms).

## Поддерживаемые валюты

- RUB (Российский рубль) - базовая для расчета кросс-курсов
- USD (Доллар США)
- EUR (Евро)
- CNY (Китайский юань)
- GBP (Британский фунт)
- JPY (Японская иена)

## Сборка и запуск

1. Убедитесь, что у вас запущен Docker Desktop
2. Соберите сервис (компиляция + тесты)

`mvn clean install -pl exchange-generator-service`

3. Запустите Consul:

`docker-compose -f docker-compose-consul.yml up -d consul-server`

4. Запустите сервис

`java -jar exchange-generator-service/target/exchange-generator-service.jar`